<!doctype html><html lang=en-gb class="m-auto dark"><head><title>Things I've Learned: January 2022 -</title><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta name=theme-color content><meta name=description content="CV"><meta name=author content="Sarah Gibson"><link rel=icon href=/favicon.ico type=image/x-icon><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.15.2/css/all.css integrity=sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu crossorigin=anonymous><link rel=stylesheet href=https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Didact+Gothic%7CRoboto:400%7CRoboto+Mono"><link rel=stylesheet href=/main.min.22a989f6e7993892f5b82560f53f899ca13339b19431f042a82283a34acb9517.css integrity="sha256-IqmJ9ueZOJL1uCVg9T+JnKEzObGUMfBCqCKDo0rLlRc=" crossorigin=anonymous><style>html{touch-action:manipulation;scroll-behavior:smooth}.panel{max-height:0;transition:.3s ease-out}.profile-photo-container{img { max-width: 100%; }}.pagefind-ui__search-input{color:#000;width:100%;padding:.5em;border-radius:.25em;border:1px solid gray}.pagefind-ui__search-clear{display:none}.dark .pagefind-ui__search-input{color:#fff;background-color:#322d2d;width:100%;padding:.5em;border-radius:.25em;border:1px solid gray}.dark .pagefind-ui__search-input::placeholder{color:#8f8f8f}.chevron{transition:300ms linear rotate}.active>.chevron{transform:rotate(90deg)}</style><script>const expandAccordion=e=>{const t=Array.from(document.querySelectorAll(".panel")),n=Array.from(document.querySelectorAll(".accordion"));if(!e.parentElement.classList.contains("active")){n.forEach(e=>{e.classList.remove("active")}),e.parentElement.classList.add("active"),t.forEach(function(e){e.style.maxHeight=null});let s=e.parentElement.nextElementSibling;if(s.id!="skill-panel"&&document.querySelector("#skill-panel")){let e=Array.from(document.querySelectorAll("#skill-percent"));e.forEach(e=>{e.style.width="0"})}s.style.maxHeight=s.scrollHeight+"px"}}</script><script>let html=document.querySelector("html"),theme=window.localStorage.getItem("theme");const setTheme=e=>{html.classList.remove("light"),e==="dark"?(html.classList.add("dark"),window.localStorage.setItem("theme","dark")):(html.classList.remove("dark"),window.localStorage.setItem("theme","light")),fixThemeToggleIcon(e)},fixThemeToggleIcon=e=>{let t=document.querySelector(".theme-toggle");t&&(e==="dark"?(t.classList.remove("fa-moon"),t.classList.add("fa-sun")):(t.classList.remove("fa-sun"),t.classList.add("fa-moon")))};if(theme==null)if(html.classList.contains("dark"))theme="dark";else if(html.classList.contains("light"))theme="light";else{const e=window.matchMedia("(prefers-color-scheme: dark)").matches;e?theme="dark":theme="light"}setTheme(theme);const toggleTheme=()=>{setTheme(html.classList.contains("dark")?"light":"dark")};window.onload=()=>{fixThemeToggleIcon(theme);let e=document.querySelector(".accordion.active");e&&(e.nextElementSibling.style.maxHeight=e.nextElementSibling.scrollHeight+"px")},window.onresize=()=>{let e=document.querySelector(".accordion.active");e&&(e.nextElementSibling.style.maxHeight=e.nextElementSibling.scrollHeight+"px")}</script></head><body class="h-screen p-2 m-auto max-w-4xl flex flex-col"><header class="nav flex flex-row row py-2 mb-6 w-full border-b border-gray-700 dark:border-gray-300 justify-between"><div><a class=nav-menu-item href=https://sgibson91.github.io/>Home</a>
<a class=nav-menu-item href=/blog>Blog</a></div><div><a class=mr-4 href=/search><i class="fas fa-search"></i>
</a><i class="fas fa-sun theme-toggle text-blue-500 hover:text-blue-700 dark:text-yellow-300 dark:hover:text-yellow-500 cursor-pointer text-lg mr-9 sm:mr-0" onclick=toggleTheme()></i></div></header><main class=grow><div class="prose prose-stone dark:prose-invert max-w-none"><div class=mb-3><h1 class=top-h1>Things I've Learned: January 2022</h1><p class=mb-1>January 31, 2022</p><p>&mdash;</p></div><div class=content><ul><li>Nested build matrices are not (yet?) supported in GitHub Actions, but you can explicitly define a set of matrix parameters using YAML array syntax.
See an example <a href=https://github.com/sgibson91/testing-gh-actions/blob/3a0fec6d59c933646e6c6b673e37cadf1dafb3a2/.github/workflows/includes-matrix-with-list.yaml>here</a>.</li><li>A pattern I often use to update my working branch with the default branch is:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout main
</span></span><span style=display:flex><span>git pull  <span style=color:#75715e># Add `upstream main` if appropriate</span>
</span></span><span style=display:flex><span>git checkout my_branch
</span></span><span style=display:flex><span>git merge main
</span></span></code></pre></div>Mostly this is fine, but occasionally merge conflicts happen.
If I know I want to keep a specific version of a conflicting file from one of the branches (as opposed to finding a non-conflicting combination), <a href=https://nitaym.github.io/ourstheirs/><code>--theirs/--ours</code></a> can be used.<pre tabindex=0><code>git checkout --ours conflicting_filename  # To keep the version from the current branch
git checkout --theirs conflicting_filename  # To keep the file from the incoming branch
</code></pre>Note that behaviour can change depending on which branch is checked out and whether a merge or rebase is being performed, so I recommend to double-check online!</li><li>That the second <code>---</code> in YAML delimits as if what follows it is another YAML file.
This can cause issues for command line YAML parsers like <code>yq</code> and made pulling the front matter from my Markdown files a little trickier than expected!</li><li>How to automatically tweet out new blog posts when they are merged into <code>main</code></li><li>How to use a GitHub App to generate tokens in GitHub Action workflows.
The tokens can then be used to securely workaround the fact that GitHub Action workflows can&rsquo;t be triggered by events that were authorised by the <code>GITHUB_TOKEN</code> in another workflow.
There is a nice write-up that helped me <a href=https://github.com/peter-evans/create-pull-request/blob/main/docs/concepts-guidelines.md#authenticating-with-github-app-generated-tokens>here</a>.</li></ul></div></div><div class="flex flex-row justify-around my-2"><h3 class="mb-1 mt-1 text-left mr-4"><a href=/blog/test-this-pr/ title="How I automated authorised cloud deployments from Pull Requests with GitHub Actions"><i class="nav-menu fas fa-chevron-circle-left"></i></a></h3><h3 class="mb-1 mt-1 text-left ml-4"><a href=/blog/2i2c-ci-cd-improvements/ title="Tech update: Multiple JupyterHubs, multiple clusters, one repository."><i class="nav-menu fas fa-chevron-circle-right"></i></a></h3></div></main><footer class="text-sm text-center border-t border-gray-500 py-6"><p class=markdownify>Copyright Sarah Gibson, 2025</p><p style=font-size:0><i><a href=https://github.com/darshanbaral/aafu>aafu
</a></i>by
<a href=https://www.darshanbaral.com/>darshan</a></p></footer></body></html>